import{z as x,T as E,o as d,f as i,a as s,u as n,w as l,F as v,Z as W,e as o,b as t,t as a,p as C,n as O,g as B,c as q,j as N,s as z,k as K,q as L}from"./app-CAbrd4sj.js";import{_ as R}from"./AuthenticatedLayout-BlSvkPnj.js";import{C as G,T as u,a as p}from"./CardTable-BCEq2UAP.js";import{_ as y}from"./Button-DsxfKS2T.js";import{_ as Q}from"./InputError-CEuk3eaO.js";import{_ as T}from"./Modal-C_wceMRv.js";import{g as f,f as Y,t as Z,n as J,s as $}from"./AsyncVueSelect-BsR6FDzs.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ApplicationLogo-NrW36AwV.js";import"./SubmitButton-B1sc4iyr.js";const X={class:"flex flex-wrap"},I={class:"w-full px-4"},ee={class:"flex items-center gap-2"},te={class:"text-2xl"},le={class:"flex items-center gap-2"},se=["href"],ae=t("br",null,null,-1),oe=t("br",null,null,-1),ne=t("br",null,null,-1),ue=t("br",null,null,-1),de=t("br",null,null,-1),ie={key:0,class:"flex"},re=t("i",{class:"fa fa-money-bill-wave"},null,-1),ce=t("i",{class:"fa fa-handshake"},null,-1),_e={key:0,class:"text-xs font-semibold inline-block py-1 px-2 rounded text-emerald-600 bg-emerald-200"},fe={key:1,class:"text-xs font-semibold inline-block py-1 px-2 rounded text-amber-600 bg-amber-200"},pe={key:2,class:"text-xs font-semibold inline-block py-1 px-2 rounded text-purple-600 bg-purple-200"},me={key:3,class:"text-xs font-semibold inline-block py-1 px-2 rounded text-red-600 bg-red-200"},he={key:4,class:"text-xs font-semibold inline-block py-1 px-2 rounded text-blue-600 bg-blue-200"},be=t("i",{class:"fa fa-list"},null,-1),xe={class:"relative flex flex-col min-w-0 break-words w-full mb-6 rounded bg-white"},ye={class:"block w-full overflow-x-auto"},ge={class:"items-center w-full bg-transparent border-collapse"},ve={class:"ml-3 font-bold text-blueGray-600"},we=t("br",null,null,-1),ke=t("i",{class:"fa fa-eye"},null,-1),Pe={class:"flex mt-1"},Se=["value"],Ce=t("br",null,null,-1),Oe=t("br",null,null,-1),Te=t("strong",null,"Note: ",-1),Ue={__name:"Index",props:{filters:{type:Object},orders:{type:Object},orderPaidByTypes:{type:Object}},setup(m){const _=x(null),w=x(!1),k=x(!1),P=x(!1),H=x(["Order Number","Customer","Summary("+f()+")","Paid","Due","Profit","Loss","Status","Date","Action"]),r=E({amount:null,paid_through:"cash"}),V=c=>{_.value=c,w.value=!0},A=c=>{_.value=c,r.amount=c.due,k.value=!0},D=()=>{r.post(route("orders.pay",_.value.id),{preserveScroll:!0,onSuccess:()=>{h(),$()}})},F=c=>{_.value=c,P.value=!0},U=()=>{r.post(route("orders.settle",_.value.id),{preserveScroll:!0,onSuccess:()=>{h(),$()}})},h=()=>{w.value=!1,k.value=!1,P.value=!1};return(c,g)=>(d(),i(v,null,[s(n(W),{title:"Order"}),s(R,null,{breadcrumb:l(()=>[o(" Orders ")]),default:l(()=>{var j;return[t("div",X,[t("div",I,[s(G,{indexRoute:"orders.index",paginatedData:m.orders,filters:m.filters,tableHeads:H.value,showFilters:!1},{cardHeader:l(()=>[t("div",ee,[t("h4",te,"Orders ("+a(m.orders.total)+")",1)])]),cardHeaderRight:l(()=>[t("div",le,[t("a",{href:c.route("orders.index",{export:"excel"}),class:"active:scale-95 rounded bg-gray-700 px-4 py-2 text-white text-xs font-bold uppercase shadow hover:shadow-lg outline-none focus:outline-none ease-linear transition-all duration-150"},"Export",8,se),s(y,{href:c.route("carts.index"),buttonType:"link"},{default:l(()=>[o("Create Order")]),_:1},8,["href"])])]),default:l(()=>[(d(!0),i(v,null,C(m.orders.data,(e,S)=>(d(),i("tr",{key:e.id},[s(u,null,{default:l(()=>[t("strong",null,"#"+a(e.order_number),1)]),_:2},1024),s(u,null,{default:l(()=>[o(a(e.customer?e.customer.name:"Unknown"),1)]),_:2},1024),s(u,{class:"text-start"},{default:l(()=>[t("span",null,"Sub Total: "+a(e.sub_total),1),ae,t("span",null,"Tax: "+a(e.tax_total),1),oe,t("span",null,"Discount: "+a(e.discount_total),1),ne,t("span",null,"Total: "+a(e.total),1),ue]),_:2},1024),s(u,null,{default:l(()=>[o(a(n(f)())+a(e.paid),1)]),_:2},1024),s(u,null,{default:l(()=>[t("span",{class:O(e.due>0?"text-red-500 text-xl font-bold":"")},a(n(f)())+a(e.due),3),de,e.due>0?(d(),i("div",ie,[s(y,{onClick:b=>A(e),title:"Pay Due",class:"px-2"},{default:l(()=>[re]),_:2},1032,["onClick"]),s(y,{onClick:b=>F(e),type:"red",class:"px-2",title:"Settle"},{default:l(()=>[ce]),_:2},1032,["onClick"])])):B("",!0)]),_:2},1024),s(u,{class:O(e.profit>0?"text-emerald-500 font-bold":"")},{default:l(()=>[o(a(n(f)())+a(e.profit),1)]),_:2},1032,["class"]),s(u,{class:O(e.loss>0?"text-red-500 font-bold":"")},{default:l(()=>[o(a(n(f)())+a(e.loss),1)]),_:2},1032,["class"]),s(u,null,{default:l(()=>[e.status==="paid"?(d(),i("span",_e,"Paid")):e.status==="partial_paid"?(d(),i("span",fe,"Partial Paid")):e.status==="over_paid"?(d(),i("span",pe,"Over Paid")):e.status==="unpaid"?(d(),i("span",me,"Unpaid")):(d(),i("span",he,"Settled"))]),_:2},1024),s(u,null,{default:l(()=>[o(a(n(Y)(e.created_at)),1)]),_:2},1024),s(u,null,{default:l(()=>[s(y,{onClick:b=>V(e),title:"Order Items"},{default:l(()=>[be]),_:2},1032,["onClick"])]),_:2},1024)]))),128))]),_:1},8,["paginatedData","filters","tableHeads"])])]),s(T,{title:"Order Items("+((j=_.value)==null?void 0:j.order_items.length)+")",show:w.value,onClose:h,maxWidth:"4xl",showSubmitButton:!1},{default:l(()=>[t("div",xe,[t("div",ye,[t("table",ge,[t("thead",null,[t("tr",null,[s(p,null,{default:l(()=>[o("Product Name")]),_:1}),s(p,null,{default:l(()=>[o("Product Number")]),_:1}),s(p,null,{default:l(()=>[o("Product Code")]),_:1}),s(p,null,{default:l(()=>[o("Price")]),_:1}),s(p,null,{default:l(()=>[o("Quantity")]),_:1}),s(p,null,{default:l(()=>[o("Action")]),_:1})])]),t("tbody",null,[(d(!0),i(v,null,C(_.value.order_items,(e,S)=>(d(),i("tr",{key:e.id},[s(u,{class:"text-left flex items-center",title:e.product_json.name},{default:l(()=>[t("span",ve,a(n(Z)(e.product_json.name,15)),1)]),_:2},1032,["title"]),s(u,null,{default:l(()=>[o(a(e.product_json.product_number),1)]),_:2},1024),s(u,null,{default:l(()=>[o(a(e.product_json.product_code),1)]),_:2},1024),s(u,null,{default:l(()=>[o(" Buying: "),t("strong",null,a(n(f)())+a(e.product_json.buying_price),1),we,o(" Selling: "),t("strong",null,a(n(f)())+a(e.product_json.selling_price),1)]),_:2},1024),s(u,null,{default:l(()=>{var b,M;return[t("strong",null,a(n(J)(e.quantity))+a((M=(b=e.product)==null?void 0:b.unit_type)==null?void 0:M.symbol),1)]}),_:2},1024),s(u,null,{default:l(()=>[e.product_id?(d(),q(y,{key:0,href:c.route("products.edit",e.product_id),buttonType:"link",preserveScroll:""},{default:l(()=>[ke]),_:2},1032,["href"])):B("",!0)]),_:2},1024)]))),128))])])])])]),_:1},8,["title","show"]),s(T,{title:"Pay Due",show:k.value,formProcessing:n(r).processing,onClose:h,onSubmitAction:D,maxWidth:"sm"},{default:l(()=>[t("div",null,[t("div",Pe,[N(t("select",{id:"paid_through","onUpdate:modelValue":g[0]||(g[0]=e=>n(r).paid_through=e),class:"w-1/2 rounded-l-md bg-gray-300 border-none px-2 py-2 outline-none focus:outline-none"},[(d(!0),i(v,null,C(m.orderPaidByTypes,(e,S)=>(d(),i("option",{key:S,value:e.value},a(e.label),9,Se))),128))],512),[[z,n(r).paid_through]]),N(t("input",{id:"paid",placeholder:"Enter paid amount","onUpdate:modelValue":g[1]||(g[1]=e=>n(r).amount=e),onKeyup:L(D,["enter"]),type:"text",class:"w-full rounded-r-md border border-gray-200 px-2 py-2 shadow-sm outline-none focus:outline-none focus:shadow-outline"},null,544),[[K,n(r).amount]])]),s(Q,{message:n(r).errors.amount},null,8,["message"])])]),_:1},8,["show","formProcessing"]),s(T,{title:"Due Settlement",show:P.value,formProcessing:n(r).processing,onClose:h,onSubmitAction:U,maxWidth:"md",submitButtonText:"Yes, settle it!"},{default:l(()=>[o(" Are you sure you want to settle this due payment? "),Ce,Oe,Te,o("The due amount will be applied as discount. ")]),_:1},8,["show","formProcessing"])]}),_:1})],64))}};export{Ue as default};
