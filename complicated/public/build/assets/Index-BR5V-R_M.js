import{_ as H}from"./AuthenticatedLayout-BlSvkPnj.js";import{z as m,T as U,o as S,f as b,a,u as l,w as t,F as M,Z as B,e as i,b as s,t as c,p as K,A as F}from"./app-CAbrd4sj.js";import{C as N,T as p}from"./CardTable-BCEq2UAP.js";import{_ as w}from"./Button-DsxfKS2T.js";import{_ as j}from"./InputError-CEuk3eaO.js";import{_ as V}from"./Modal-C_wceMRv.js";import{_ as y}from"./DashboardInputGroup-rG2SWgOl.js";import{A as I,s as E}from"./AsyncVueSelect-BsR6FDzs.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ApplicationLogo-NrW36AwV.js";import"./SubmitButton-B1sc4iyr.js";const O={class:"flex flex-wrap"},R={class:"w-full px-4"},z={class:"flex items-center gap-2"},L={class:"text-2xl"},W={class:"flex items-center gap-2"},Y=["href"],Z=s("i",{class:"fa fa-edit"},null,-1),q=s("i",{class:"fa fa-trash-alt"},null,-1),G={class:"mt-2 grid gap-4 sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-3 min-h-32"},J={class:"flex flex-col"},Q=s("label",{for:"employee",class:"text-stone-600 text-sm font-medium"},"Select Employee",-1),X={class:"flex flex-col overflow-auto"},ee={class:"mt-2 grid gap-4 sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-3"},ae={class:"flex flex-col overflow-auto"},le={class:"flex flex-col overflow-auto"},pe={__name:"Index",props:{filters:{type:Object},salaries:{type:Object}},setup(d){const _=m(null),g=m(!1),v=m(!1),x=m(!1),h=m(null),C=m(["#","Employee","Amount","Salary Date","Action"]),e=U({employee_id:"",amount:"",salary_date:""}),A=n=>{_.value=n,e.employee_id=n.employee_id,e.amount=n.amount,e.salary_date=n.salary_date,v.value=!0,F(()=>h.value.focus())},k=n=>{_.value=n,x.value=!0},f=()=>{e.post(route("salaries.store"),{preserveScroll:!0,onSuccess:n=>{u(),E()},onError:()=>h.value.focus()})},D=()=>{e.put(route("salaries.update",_.value.id),{preserveScroll:!0,onSuccess:()=>{u(),E()},onError:()=>h.value.focus()})},P=()=>{e.delete(route("salaries.destroy",_.value.id),{preserveScroll:!0,onSuccess:()=>{u(),E()}})},u=()=>{g.value=!1,v.value=!1,x.value=!1,e.reset()};return(n,r)=>(S(),b(M,null,[a(l(B),{title:"Salary"}),a(H,null,{breadcrumb:t(()=>[i(" Salary ")]),default:t(()=>[s("div",O,[s("div",R,[a(N,{indexRoute:"salaries.index",paginatedData:d.salaries,filters:d.filters,tableHeads:C.value,showFilters:!1},{cardHeader:t(()=>[s("div",z,[s("h4",L,"Salary ("+c(d.salaries.total)+")",1)])]),cardHeaderRight:t(()=>[s("div",W,[s("a",{href:n.route("salaries.index",{export:"excel"}),class:"active:scale-95 rounded bg-gray-700 px-4 py-2 text-white text-xs font-bold uppercase shadow hover:shadow-lg outline-none focus:outline-none ease-linear transition-all duration-150"},"Export",8,Y),a(w,{onClick:r[0]||(r[0]=o=>g.value=!0)},{default:t(()=>[i("Pay Salary")]),_:1})])]),default:t(()=>[(S(!0),b(M,null,K(d.salaries.data,(o,T)=>(S(),b("tr",{key:o.id},[a(p,null,{default:t(()=>[i(c(d.salaries.current_page*d.salaries.per_page-(d.salaries.per_page-(T+1))),1)]),_:2},1024),a(p,null,{default:t(()=>[i(c(o.employee.name)+" ("+c(o.employee.designation)+")",1)]),_:2},1024),a(p,null,{default:t(()=>[i(c(o.amount),1)]),_:2},1024),a(p,null,{default:t(()=>[i(c(o.salary_date),1)]),_:2},1024),a(p,null,{default:t(()=>[a(w,{onClick:$=>A(o)},{default:t(()=>[Z]),_:2},1032,["onClick"]),a(w,{onClick:$=>k(o),type:"red"},{default:t(()=>[q]),_:2},1032,["onClick"])]),_:2},1024)]))),128))]),_:1},8,["paginatedData","filters","tableHeads"])])]),a(V,{title:"Pay Salary",show:g.value,formProcessing:l(e).processing,onClose:u,onSubmitAction:f},{default:t(()=>[s("div",G,[s("div",J,[Q,a(I,{modelValue:l(e).employee_id,"onUpdate:modelValue":r[1]||(r[1]=o=>l(e).employee_id=o),resource:"employees.index",placeholder:"Select employee",class:"mt-2"},null,8,["modelValue"]),a(j,{message:l(e).errors.employee_id},null,8,["message"])]),s("div",X,[a(y,{label:"Salary Date",name:"salary_date",modelValue:l(e).salary_date,"onUpdate:modelValue":r[2]||(r[2]=o=>l(e).salary_date=o),placeholder:"Enter salary date",errorMessage:l(e).errors.salary_date,onKeyupEnter:f,type:"date"},null,8,["modelValue","errorMessage"])])])]),_:1},8,["show","formProcessing"]),a(V,{title:"Edit",show:v.value,formProcessing:l(e).processing,onClose:u,onSubmitAction:D},{default:t(()=>[s("div",null,[a(y,{label:"Employee",name:"employee_id",modelValue:l(e).employee_id,"onUpdate:modelValue":r[3]||(r[3]=o=>l(e).employee_id=o),placeholder:"Select employee",errorMessage:l(e).errors.employee_id,onKeyupEnter:f},null,8,["modelValue","errorMessage"])]),s("div",ee,[s("div",ae,[a(y,{label:"Amount",name:"amount",modelValue:l(e).amount,"onUpdate:modelValue":r[4]||(r[4]=o=>l(e).amount=o),placeholder:"Enter amount",errorMessage:l(e).errors.amount,onKeyupEnter:f,type:"number"},null,8,["modelValue","errorMessage"])]),s("div",le,[a(y,{label:"Salary Date",name:"salary_date",modelValue:l(e).salary_date,"onUpdate:modelValue":r[5]||(r[5]=o=>l(e).salary_date=o),placeholder:"Enter salary date",errorMessage:l(e).errors.salary_date,onKeyupEnter:f,type:"date"},null,8,["modelValue","errorMessage"])])])]),_:1},8,["show","formProcessing"]),a(V,{title:"Delete",show:x.value,formProcessing:l(e).processing,onClose:u,onSubmitAction:P,maxWidth:"sm",submitButtonText:"Yes, delete it!"},{default:t(()=>[i(" Are you sure you want to delete this salary? ")]),_:1},8,["show","formProcessing"])]),_:1})],64))}};export{pe as default};
