import{z as d,T as j,o as w,f as g,a as t,u as n,w as s,F as E,Z as F,e as c,b as o,t as m,p as K,j as T,k as M,q as D,A as P}from"./app-CAbrd4sj.js";import{_ as O}from"./AuthenticatedLayout-BlSvkPnj.js";import{C as R,T as f}from"./CardTable-BCEq2UAP.js";import{_ as b}from"./Button-DsxfKS2T.js";import{_ as A}from"./InputError-CEuk3eaO.js";import{_ as C}from"./Modal-C_wceMRv.js";import{s as y}from"./AsyncVueSelect-BsR6FDzs.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ApplicationLogo-NrW36AwV.js";import"./SubmitButton-B1sc4iyr.js";const U={class:"flex flex-wrap"},q={class:"w-full px-4"},z={class:"flex items-center gap-2"},L={class:"text-2xl"},W={class:"flex items-center gap-2"},Y=["href"],Z={class:"ml-3 font-bold text-blueGray-600"},J=o("i",{class:"fa fa-edit"},null,-1),Q=o("i",{class:"fa fa-trash-alt"},null,-1),X=o("label",{for:"name"},"Name",-1),ee=o("label",{for:"name"},"Name",-1),ce={__name:"Index",props:{filters:{type:Object},customers:{type:Object}},setup(r){const p=d(null),_=d(!1),x=d(!1),v=d(!1),u=d(null),N=d(["#","Name","Email","Phone","Action"]),e=j({name:null,email:null,phone:null,address:null,photo:null}),$=()=>{_.value=!0,P(()=>u.value.focus())},G=a=>{p.value=a,e.name=a.name,e.email=a.email,e.phone=a.phone,e.address=a.address,e.photo=null,x.value=!0,P(()=>u.value.focus())},H=a=>{p.value=a,v.value=!0},k=()=>{e.post(route("customers.store"),{preserveScroll:!0,onSuccess:()=>{i(),y()},onError:()=>u.value.focus()})},S=()=>{e.transform(a=>({...a,_method:"put"})).post(route("customers.update",p.value.id),{preserveScroll:!0,onSuccess:()=>{i(),y()},onError:()=>u.value.focus()})},V=()=>{e.post(route("customers.destroy",p.value.id),{preserveScroll:!0,onSuccess:()=>{i(),y()}})},i=()=>{_.value=!1,x.value=!1,v.value=!1,e.reset()};return(a,h)=>(w(),g(E,null,[t(n(F),{title:"Customer"}),t(O,null,{breadcrumb:s(()=>[c(" Customers ")]),default:s(()=>[o("div",U,[o("div",q,[t(R,{indexRoute:"customers.index",paginatedData:r.customers,filters:r.filters,tableHeads:N.value,showFilters:!1},{cardHeader:s(()=>[o("div",z,[o("h4",L,"Customers ("+m(r.customers.total)+")",1)])]),cardHeaderRight:s(()=>[o("div",W,[o("a",{href:a.route("customers.index",{export:"excel"}),class:"active:scale-95 rounded bg-gray-700 px-4 py-2 text-white text-xs font-bold uppercase shadow hover:shadow-lg outline-none focus:outline-none ease-linear transition-all duration-150"},"Export",8,Y),t(b,{onClick:$},{default:s(()=>[c("Create Customer")]),_:1})])]),default:s(()=>[(w(!0),g(E,null,K(r.customers.data,(l,B)=>(w(),g("tr",{key:l.id},[t(f,null,{default:s(()=>[c(m(r.customers.current_page*r.customers.per_page-(r.customers.per_page-(B+1))),1)]),_:2},1024),t(f,{class:"text-left flex items-center"},{default:s(()=>[o("span",Z,m(l.name),1)]),_:2},1024),t(f,null,{default:s(()=>[c(m(l.email),1)]),_:2},1024),t(f,null,{default:s(()=>[c(m(l.phone),1)]),_:2},1024),t(f,null,{default:s(()=>[t(b,{onClick:I=>G(l)},{default:s(()=>[J]),_:2},1032,["onClick"]),t(b,{onClick:I=>H(l),type:"red"},{default:s(()=>[Q]),_:2},1032,["onClick"])]),_:2},1024)]))),128))]),_:1},8,["paginatedData","filters","tableHeads"])])]),t(C,{title:"Create",show:_.value,formProcessing:n(e).processing,onClose:i,onSubmitAction:k},{default:s(()=>[o("div",null,[X,T(o("input",{id:"name",ref_key:"nameInput",ref:u,"onUpdate:modelValue":h[0]||(h[0]=l=>n(e).name=l),onKeyup:D(k,["enter"]),type:"text",placeholder:"Enter name",class:"px-3 py-3 placeholder-blueGray-300 text-blueGray-600 relative bg-white rounded text-sm shadow outline-none focus:outline-none focus:shadow-outline w-full"},null,544),[[M,n(e).name]]),t(A,{message:n(e).errors.name},null,8,["message"])])]),_:1},8,["show","formProcessing"]),t(C,{title:"Edit",show:x.value,formProcessing:n(e).processing,onClose:i,onSubmitAction:S},{default:s(()=>[o("div",null,[ee,T(o("input",{id:"name",ref_key:"nameInput",ref:u,"onUpdate:modelValue":h[1]||(h[1]=l=>n(e).name=l),onKeyup:D(S,["enter"]),type:"text",placeholder:"Enter name",class:"px-3 py-3 placeholder-blueGray-300 text-blueGray-600 relative bg-white rounded text-sm shadow outline-none focus:outline-none focus:shadow-outline w-full"},null,544),[[M,n(e).name]]),t(A,{message:n(e).errors.name},null,8,["message"])])]),_:1},8,["show","formProcessing"]),t(C,{title:"Delete",show:v.value,formProcessing:n(e).processing,onClose:i,onSubmitAction:V,maxWidth:"sm",submitButtonText:"Yes, delete it!"},{default:s(()=>[c(" Are you sure you want to delete this customer? ")]),_:1},8,["show","formProcessing"])]),_:1})],64))}};export{ce as default};
